 Patch for bug 239101 by Matsuu Takuto, via Redmine issue 1337 (yes, really).
 Backported for 1.8.* by Alex Legler.

Index: ruby-1.8.7-p299/lib/mkmf.rb
===================================================================
--- ruby-1.8.7-p299.orig/lib/mkmf.rb
+++ ruby-1.8.7-p299/lib/mkmf.rb
@@ -1523,7 +1523,7 @@ static:		$(STATIC_LIB)#{$extout ? " inst
     dest = "#{dir}/#{f}"
     mfile.puts dir, "install-so: #{dest}"
     unless $extout
-      mfile.print "#{dest}: #{f}\n"
+      mfile.print "#{dest}: #{dir} #{f}\n"
       if (sep = config_string('BUILD_FILE_SEPARATOR'))
         f.gsub!("/", sep)
         dir.gsub!("/", sep)
